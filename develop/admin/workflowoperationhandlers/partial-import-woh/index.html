<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Partial Import - Opencast - Administration Guide</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Partial Import";
    var mkdocs_page_input_path = "workflowoperationhandlers/partial-import-woh.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Opencast - Administration Guide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../releasenotes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../upgrade/">Upgrade</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../installation/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installation/multiple-servers/">Multiple Servers</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Source</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/source-linux/">Linux</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/source-macosx/">MacOS X</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Package</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/debs/">Debian/Ubuntu</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/rpm-fedora/">Fedora</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/rpm-rhel-sl-centos/">RHEL/CentOS</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation with Docker</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/docker-local/">Testing Locally</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Configuration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../configuration/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/basic/">Basic</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/database/">Database</a>
                </li>
                <li class="">
                    
    <span class="caption-text">HTTPS</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/nginx/">Using Nginx</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/opencast.only/">Internal HTTPS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/migration/">Migrating old content to HTTPS</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/asset-manager/">Asset Manager</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/message-broker/">Message Broker</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/metadata/">Metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/encoding/">Encoding</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/inbox/">Inbox</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/listproviders/">List Providers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/load/">Load</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/log/">Log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/user-statistics.and.privacy/">User Statistics and Privacy Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/multi.tenancy/">Multi Tenancy</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Authentication, Autorization and User Management</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security/">General Security</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/acl/">Access Control Lists</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.aai/">Authentication and Authorization Infrastructure (AAI)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.cas/">Central Authentication Service (CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.ldap/">LDAP Authentication and Authorization (without CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.user.moodle/">Moodle User Provider</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.user.sakai/">Sakai User Provider</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.user.brightspace/">Brightspace User Provider</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/stream-security/">Stream Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/workflow/">Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/external-api/">External API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/oaipmh/">OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/monitoring/">External Monitoring</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Admin UI Configuration</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/admin-ui/event-filters/">Event Filters</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/admin-ui/asset-upload/">Manual Asset Upload</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/admin-ui/languages/">Languages</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/admin-ui/statistics/">Statistics</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/admin-ui/thumbnails/">Thumbnails</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../version-support/">Version Support</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Modules</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../modules/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/atomrss/">Atom/RSS Feed</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Amazon Services</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/awss3archive/">Amazon S3 Archive Storage</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/awss3distribution/">Amazon S3 Distribution</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/execute/">Execute Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/liveschedule/">Live Schedule</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/ltimodule/">LTI Module</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/mediamodule.configuration/">Media Module</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Player</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/player.configuration/">Configuration</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/player.url.parameter/">URL Parameters</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/player.matomo.tracking/">Matomo Tracking</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/paella.player/">Paella player</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Search Index</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/searchindex/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/searchindex/solr/">Solr</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/searchindex/elasticsearch/">Elasticsearch</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/stream-security/">Stream Security</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Termination State</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/terminationstate/">Basic</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/terminationstate.aws.autoscaling/">AWS AutoScaling</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/textextraction/">Text Extraction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/timelinepreviews/">Timeline Previews</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/googlespeechtranscripts/">Transcripts (Google Speech)</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/watsontranscripts/">Transcripts (IBM Watson)</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Video Editor</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/videoeditor.setup/">Setup</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../modules/videoeditor.architecture/">Architecture</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/videosegmentation/">Video Segmentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/waveform/">Waveform Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/adaptivestreaming-wowza/">Wowza Adaptive Streaming Distribution Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../../modules/youtubepublication/">YouTube Publication</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Workflow Operation Handler</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../retry-strategies/">Retry Strategies</a>
                </li>
                <li class="">
                    
    <a class="" href="../add-catalog-woh/">Add Catalog</a>
                </li>
                <li class="">
                    
    <a class="" href="../analyze-tracks-woh/">Analyze Tracks</a>
                </li>
                <li class="">
                    
    <a class="" href="../analyzeaudio-woh/">Analyze Audio</a>
                </li>
                <li class="">
                    
    <a class="" href="../animate-woh/">Animate</a>
                </li>
                <li class="">
                    
    <a class="" href="../snapshot-woh/">Asset Snapshot</a>
                </li>
                <li class="">
                    
    <a class="" href="../asset-delete-woh/">Asset Delete</a>
                </li>
                <li class="">
                    
    <a class="" href="../attach-watson-transcription-woh/">Attach Watson Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../cleanup-woh/">Cleanup</a>
                </li>
                <li class="">
                    
    <a class="" href="../comment-woh/">Comment</a>
                </li>
                <li class="">
                    
    <a class="" href="../compose-woh/">Compose</a>
                </li>
                <li class="">
                    
    <a class="" href="../composite-woh/">Composite</a>
                </li>
                <li class="">
                    
    <a class="" href="../concat-woh/">Concat</a>
                </li>
                <li class="">
                    
    <a class="" href="../configure-by-dcterm-woh/">Configure-By-DCTerm</a>
                </li>
                <li class="">
                    
    <a class="" href="../copy-woh/">Copy</a>
                </li>
                <li class="">
                    
    <a class="" href="../clone-woh/">Clone</a>
                </li>
                <li class="">
                    
    <a class="" href="../coverimage-woh/">Cover Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../defaults-woh/">Defaults</a>
                </li>
                <li class="">
                    
    <a class="" href="../demux-woh/">Demux</a>
                </li>
                <li class="">
                    
    <a class="" href="../duplicate-event-woh/">Duplicate Event</a>
                </li>
                <li class="">
                    
    <a class="" href="../editor-woh/">Editor</a>
                </li>
                <li class="">
                    
    <a class="" href="../encode-woh/">Encode</a>
                </li>
                <li class="">
                    
    <a class="" href="../error-resolution-woh/">Error Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../execute-once-woh/">Execute Once</a>
                </li>
                <li class="">
                    
    <a class="" href="../execute-many-woh/">Execute Many</a>
                </li>
                <li class="">
                    
    <a class="" href="../export-wf-properties-woh/">Export Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../extracttext-woh/">Extract Text</a>
                </li>
                <li class="">
                    
    <a class="" href="../failing-woh/">Failing</a>
                </li>
                <li class="">
                    
    <a class="" href="../google-speech-attach-transcription-woh/">Google Speech Attach Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../google-speech-start-transcription-woh/">Google Speech Start Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../httpnotify-woh/">HTTP Notify</a>
                </li>
                <li class="">
                    
    <a class="" href="../image-woh/">Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../image-convert-woh/">Image convert</a>
                </li>
                <li class="">
                    
    <a class="" href="../imagetovideo-woh/">Image to Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../import-wf-properties-woh/">Import Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../incident-woh/">Incident</a>
                </li>
                <li class="">
                    
    <a class="" href="../include-woh/">Include</a>
                </li>
                <li class="">
                    
    <a class="" href="../ingestdownload-woh/">Ingest-Download</a>
                </li>
                <li class="">
                    
    <a class="" href="../inspect-woh/">Inspect</a>
                </li>
                <li class="">
                    
    <a class="" href="../log-woh/">Log</a>
                </li>
                <li class="">
                    
    <a class="" href="../notification/">Mattermost Notification Module</a>
                </li>
                <li class="">
                    
    <a class="" href="../move-storage-woh/">Move Storage</a>
                </li>
                <li class="">
                    
    <a class="" href="../multiencode-woh/">Multiencode</a>
                </li>
                <li class="">
                    
    <a class="" href="../normalizeaudio-woh/">Normalize Audio</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Partial Import</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#partialimportworkflowoperation">PartialImportWorkflowOperation</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#description">Description</a></li>
        
            <li><a class="toctree-l4" href="#prerequisite">Prerequisite</a></li>
        
            <li><a class="toctree-l4" href="#parameter-table">Parameter Table</a></li>
        
            <li><a class="toctree-l4" href="#operation-example">Operation Example</a></li>
        
            <li><a class="toctree-l4" href="#smil-file-structure">SMIL File Structure</a></li>
        
            <li><a class="toctree-l4" href="#encoding-profiles-the-partialimportworkflowoperation-uses-a-number-of-encoding-profiles-to-perform-its-processing">Encoding Profiles The PartialImportWorkflowOperation uses a number of encoding profiles to perform its processing.</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../postmediapackage-woh/">Post Media Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../prepareav-woh/">Prepare A/V</a>
                </li>
                <li class="">
                    
    <a class="" href="../probe-resolution-woh/">Probe Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../process-smil-woh/">Process Smil</a>
                </li>
                <li class="">
                    
    <a class="" href="../publish-aws-woh/">Publish AWS</a>
                </li>
                <li class="">
                    
    <a class="" href="../publish-configure-woh/">Publish Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../publish-engage-woh/">Publish Engage</a>
                </li>
                <li class="">
                    
    <a class="" href="../publish-oaipmh-woh/">Publish OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../publish-youtube-woh/">Publish YouTube</a>
                </li>
                <li class="">
                    
    <a class="" href="../republish-oaipmh-woh/">Republish OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../retract-aws-woh/">Retract AWS S3 and Cloudfront</a>
                </li>
                <li class="">
                    
    <a class="" href="../retract-engage-woh/">Retract Engage</a>
                </li>
                <li class="">
                    
    <a class="" href="../retract-configure-woh/">Retract Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../retract-oaipmh-woh/">Retract OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../retract-youtube-woh/">Retract YouTube</a>
                </li>
                <li class="">
                    
    <a class="" href="../segmentpreviews-woh/">Segment Previews</a>
                </li>
                <li class="">
                    
    <a class="" href="../segmentvideo-woh/">Segment Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../select-streams-woh/">Select Streams</a>
                </li>
                <li class="">
                    
    <a class="" href="../send-email-woh/">Send Email</a>
                </li>
                <li class="">
                    
    <a class="" href="../series-woh/">Series</a>
                </li>
                <li class="">
                    
    <a class="" href="../silence-woh/">Silence</a>
                </li>
                <li class="">
                    
    <a class="" href="../start-watson-transcription-woh/">Start Watson Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../start-workflow-woh/">Start Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../statistics-writer/">Statistics Writer</a>
                </li>
                <li class="">
                    
    <a class="" href="../tag-woh/">Tag</a>
                </li>
                <li class="">
                    
    <a class="" href="../tag-by-dcterm-woh/">Tag-By-DCTerm</a>
                </li>
                <li class="">
                    
    <a class="" href="../timelinepreviews-woh/">Timelinepreviews</a>
                </li>
                <li class="">
                    
    <a class="" href="../transfer-metadata-woh/">Transfer Metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="../theme-woh/">Theme</a>
                </li>
                <li class="">
                    
    <a class="" href="../waveform-woh/">Waveform</a>
                </li>
                <li class="">
                    
    <a class="" href="../zip-woh/">Zip</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Opencast - Administration Guide</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Workflow Operation Handler &raquo;</li>
        
      
    
    <li>Partial Import</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/opencast/opencast/edit/develop/docs/guides/admin/docs/workflowoperationhandlers/partial-import-woh.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="partialimportworkflowoperation">PartialImportWorkflowOperation</h1>
<h2 id="description">Description</h2>
<p>The PartialImportWorkflowOperation processes a set of audio and video files according to a SMIL document describing
their relations. Its primary use is to post-process audio and video files ingested by capture agents using
/ingest/addPartialTrack of the ingest endpoint.</p>
<h2 id="prerequisite">Prerequisite</h2>
<p>When using the PartialImportWorkflowOperation, it is recommended to perform a media inspection beforehand using the
InspectWorkflowOperation with the option <code>accurate-frame-count</code> set to <code>true</code>. This ensures that
the PartialImportWorkflowOperation works correctly in case of media files with incorrect framecount in their header.
Note that the use of <code>accurate-frame-count</code> will force the InspectWorkflowOperation to decode the complete video
stream which makes the operation more expensive in terms of load.</p>
<h2 id="parameter-table">Parameter Table</h2>
<table>
<thead>
<tr>
<th>configuration keys</th>
<th>type</th>
<th>description</th>
<th>default value</th>
</tr>
</thead>
<tbody>
<tr>
<td>source-presenter-flavor</td>
<td>MediaPackageElementFlavor</td>
<td>The flavor of tracks for the presenter video</td>
<td></td>
</tr>
<tr>
<td>source-presentation-flavor</td>
<td>MediaPackageElementFlavor</td>
<td>The flavor of tracks for the presentation video</td>
<td></td>
</tr>
<tr>
<td><strong>source-smil-flavor</strong>*</td>
<td>MediaPackageElementFlavor</td>
<td>The flavor of the SMIL file describing how to build the targets.</br>When using /ingest/addPartialTrack, the ingest service will create the SMIL file and add it to the media package as flavor <em>smil/source+partial</em></td>
<td></td>
</tr>
<tr>
<td><strong>target-presenter-flavor</strong>*</td>
<td>MediaPackageElementFlavor</td>
<td>The flavor to be used for the target presentation track.</br>Both the type and subtype must not be <em>*</em></td>
<td></td>
</tr>
<tr>
<td><strong>target-presentation-flavor</strong>*</td>
<td>MediaPackageElementFlavor</td>
<td>The flavor to be used for the target presentation track.</br>Both the type nor subtype must not be <em>*</em></td>
<td></td>
</tr>
<tr>
<td><strong>concat-encoding-profile</strong>*</td>
<td>String</td>
<td>Encoding profile used for concatenating audio or video files</td>
<td></td>
</tr>
<tr>
<td>concat-output-framerate</td>
<td>Float</td>
<td>The optional output framerate for concatenated video files</td>
<td></td>
</tr>
<tr>
<td><strong>trim-encoding-profile</strong>*</td>
<td>String</td>
<td>Encoding profile using for trimming tracks</td>
<td></td>
</tr>
<tr>
<td>force-encoding</td>
<td>Boolean</td>
<td>If set to <em>true</em>, all generated target files will be encoded using the encoding profile <em>force-encoding-profile</em></td>
<td>false</td>
</tr>
<tr>
<td><strong>force-encoding-profile</strong>*</td>
<td>String</td>
<td>Encoding profile to be used when <em>force-encoding</em> is set to <em>true</em> or a given target track has a file extension not included in <em>required-extensions</em></td>
<td></td>
</tr>
<tr>
<td>required-extensions</td>
<td>String , { "," , String }</td>
<td>Comma-separated list of file extension names (case insensitive). All generated target files whose file extensions are not in this list will be encoded using the encoding profile <em>force-encoding-profile</em></td>
<td>"mp4"</td>
</tr>
<tr>
<td>enforce-divisible-by-two</td>
<td>Boolean</td>
<td>If set, all video targets will have widths and heights divisible by two. This might be necessary depending since some encoder fail when encountering uneven widths or heights.</td>
<td>false</td>
</tr>
</tbody>
</table>
<p>* <strong>required keys</strong></p>
<p>Note that it is allowed to set the configuration keys 'target-presenter-flavor' and 'target-presentation-flavor' to the
same value.</p>
<h2 id="operation-example">Operation Example</h2>
<p>What exactly the PartialImportWorkflowOperation does is best described by example. In our example, a capture agent
records three sources:</p>
<ul>
<li>Presenter camera (video only)</li>
<li>Presenter microphone (audio only)</li>
<li>Presentation (video only)</li>
</ul>
<p>While the capture agent internally triggers the recording for all sources at the same time, the actual recording of the
individual sources might not necessarily start at the exact same time, e.g. due to latency of the recording
devices.</br> Also, while recording, a watch dog in our example capture agent recognizes that for whatever reason, the
recording of the sources had stopped and restarted again several times - resulting in multiple audio and/or video files
per source.</p>
<p>Here is a graphics showing how this example could look like:</p>
<p><img alt="Figure 1" src="../partial-import-woh-figure-1.jpg" /></p>
<p>So we have three tracks, but seven files:</p>
<ul>
<li>Presenter camera: 2 video-only files</li>
<li>Presenter microphone: 2 audio-only files</li>
<li>Presentation: 3 video-only files</li>
</ul>
<p>We call that individual fragments of a track <em>partial tracks</em>.</p>
<p>Our example capture agent can now use the addPartialTrack ingest facility to specify for each of the ingested files, at
which time the content fits into the overall recording. The ingest service will automatically create the SMIL file
describing how the files relate to each other and add it to the media package as flavor <em>smil/source+partial</em>.</p>
<p>In our example, this SMIL file would like something like:</p>
<pre><code>  &lt;?xml version="1.1" encoding="UTF-8"?&gt;
  &lt;smil xmlns="http://www.w3.org/ns/SMIL" version="3.0"&gt;
    &lt;head/&gt;
    &lt;body&gt;
      &lt;par dur="93861ms"&gt;
        &lt;seq&gt;
          &lt;video begin="412ms" dur="13440ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/5133d85c-5813-4b54-8a43-0cce9ddc1c4a/video_file.mov"/&gt;
          &lt;video begin="15324ms" dur="73440ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/5133d85c-5813-4b54-8a43-0cce9ddc1c4a/video_file.mov"/&gt;
          &lt;audio begin="0ms" dur="40861ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/72a42596-e1d0-47a5-b9c8-60180b466954/audio_file.mov"/&gt;
          &lt;audio begin="43400ms" dur="13861ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/72a42596-e1d0-47a5-b9c8-60180b466954/audio_file.mov"/&gt;
        &lt;/seq&gt;
        &lt;seq&gt;
          &lt;video begin="948ms" dur="33440ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/bf5ea647-b99b-4ec3-a10c-29445fb01eca/video_file.mov"/&gt;
          &lt;video begin="35643ms" dur="15430ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/bf5ea647-b99b-4ec3-a10c-29445fb01eca/video_file.mov"/&gt;
          &lt;video begin="45448ms" dur="25440ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/bf5ea647-b99b-4ec3-a10c-29445fb01eca/video_file.mov"/&gt;
        &lt;/seq&gt;
      &lt;/par&gt;
    &lt;/body&gt;
  &lt;/smil&gt;
</code></pre>
<p>What we finally want, however, is a single presenter and a single presentation track that can be processed by Opencast
workflow operations. To achieve this, the PartialImportWorkflowOperation is used to post-process the files as described
in the SMIL file:</p>
<pre><code> &lt;operation id="partial-import"
           description="Post-processing raw audio and video files from capture agent"
           fail-on-error="true"
           exception-handler-workflow="partial-error"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-presenter-flavor"&gt;presenter/source&lt;/configuration&gt;
    &lt;configuration key="source-presentation-flavor"&gt;presentation/source&lt;/configuration&gt;
    &lt;configuration key="source-smil-flavor"&gt;smil/source+partial&lt;/configuration&gt;
    &lt;configuration key="target-presenter-flavor"&gt;presenter/standard&lt;/configuration&gt;
    &lt;configuration key="target-presentation-flavor"&gt;presentation/standard&lt;/configuration&gt;
    &lt;configuration key="concat-encoding-profile"&gt;concat.work&lt;/configuration&gt;
    &lt;configuration key="trim-encoding-profile"&gt;trim.work&lt;/configuration&gt;
    &lt;configuration key="force-encoding-profile"&gt;editor.work&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
<p>In our example, the PartialImportWorkflowOperation will create the target flavors presenter/standard and
presentation/standard as depicted below:</p>
<p><img alt="Figure 2" src="../partial-import-woh-figure-2.jpg" /></p>
<p>The green parts have been filled in by the PartialImportWorkflowOperation by either silence (audio) or pictures (video).</p>
<p>To achieve this, the PartialImportWorkflowOperation performs the following steps:</p>
<ol>
<li>
<p><strong>Extend content at the beginning:</strong> If the first partial track of a given source and type (audio/video) does not
   begin at position zero, content is added in front of it so that the corresponding target track will start at position
   zero. For audio, silence is added. In case of video, the first frame of the first partial track is added.</p>
</li>
<li>
<p><strong>Filling the gaps:</strong> As you can see in our example, it is possible that content is missing within the actual tracks.
   Those gaps are filled by adding silence (in case of audio) or adding the last frame of the previous partial track (in
   case of video). In this step, content is also added at the end of the track in case its duration is less than the
   overall duration of the recording.</p>
</li>
<li>
<p><strong>Trim the tracks:</strong> It is possible that processing the ingested files according to the SMIL file would result in
   tracks that have a longer duration than the overall recording should. Therefore, all tracks are trimmed individually
   to the target duration.</p>
</li>
<li>
<p><strong>Mux audio tracks:</strong> To avoid the necessity to call further workflow operations just for audio muxing, the
   PartialImportWorkflowOperation can perform audio muxing itself. In our example, it would mux the audio and video
   track of the presenter into a single audio/video track.</p>
</li>
<li>
<p><strong>Ensure specific output formats:</strong> There may be situations where you want to ensure that the output of this
   operations comes with a specific file format, e.g. <em>MP4</em>. The configuration keys <em>force-encoding</em> and
   <em>required_extensions</em> can be used to control the behavior of the PartialImportWorkflowOperation: In case the
   <em>force-encoding</em> is set to <em>true</em>, the target tracks will be re-encoded using the <em>force-encoding-profile</em>. The
   target tracks will also be re-encoded using that encoding profile in case its file extensions don't match the
   <em>required_extensions</em>.</p>
</li>
</ol>
<h2 id="smil-file-structure">SMIL File Structure</h2>
<p>The PartialImportWorkflowOperation expects a specific subset of SMIL that is described in this section.
The overall structure of the SMIL file is shown by example below:</p>
<pre><code>  &lt;?xml version="1.1" encoding="UTF-8"?&gt;
  &lt;smil xmlns="http://www.w3.org/ns/SMIL" version="3.0"&gt;
    &lt;head/&gt;
    &lt;body&gt;
      &lt;par dur="15000ms"&gt;
        &lt;seq&gt;
          &lt;video begin="400ms" dur="13000ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/5133d85c-5813-4b54-8a43-0cce9ddc1c4a/video_file.mov"/&gt;
          &lt;video begin="15000ms" dur="70000ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/5133d85c-5813-4b54-8a43-0cce9ddc1c4a/video_file.mov"/&gt;
          &lt;audio begin="0ms" dur="400ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/72a42596-e1d0-47a5-b9c8-60180b466954/audio_file.mov"/&gt;
          &lt;audio begin="900ms" dur="13000ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/72a42596-e1d0-47a5-b9c8-60180b466954/audio_file.mov"/&gt;
        &lt;/seq&gt;
        &lt;seq&gt;
          &lt;video begin="900ms" dur="30000ms" src="/files/mediapackage/7b56bf47-8065-4244-96a0-412a759ccc3f/bf5ea647-b99b-4ec3-a10c-29445fb01eca/video_file.mov"/&gt;
        &lt;/seq&gt;
      &lt;/par&gt;
    &lt;/body&gt;
  &lt;/smil&gt;
</code></pre>
<p>The PartialImportWorkflowOperation can handle at most one <strong><em>par</em></strong> element that is used to describe to overall media
duration using the attribute <em>dur</em>. The resulting tracks will be trimmed to this duration if necessary. In the example
above, the overall media duration is set to 15 seconds.</p>
<p>The <em>par</em> element has one or two sequence sub elements <strong><em>seq</em></strong>, each describing a track that is to be built from its
sub elements - the partial tracks. Each sequence (<em>seq</em>) has at least one sub element. Sub elements can be either
<strong><em>video</em></strong> elements, <strong><em>audio</em></strong> elements or both <em>video</em> and <em>audio</em> elements. Each of those sub elements requires the
attributes <em>begin</em> (position of partial track in milliseconds relative to start of overall media) and <em>dur</em> (duration of
partial track in milliseconds) The <em>audio</em> elements are used to indicate that the media file referred to is an
audio-only media file, whereas <em>video</em> elements can refer to either video-only or audio-video media files. The following
combinations result in a defined behavior:</p>
<h3 id="supported-combinations-of-video-and-audio-elements">Supported Combinations of Video and Audio Elements</h3>
<table>
<thead>
<tr>
<th>video</th>
<th>audio</th>
<th>resulting track</th>
</tr>
</thead>
<tbody>
<tr>
<td>audio/video track</td>
<td>n/a</td>
<td>audio/video track</td>
</tr>
<tr>
<td>video-only track</td>
<td>n/a</td>
<td>video-only track</td>
</tr>
<tr>
<td>video-only track</td>
<td>audio-only track</td>
<td>audio/video track</td>
</tr>
<tr>
<td>n/a</td>
<td>audio-only track</td>
<td>audio-only track</td>
</tr>
</tbody>
</table>
<p>All other combinations of <em>video</em> and <em>audio</em> elements result in unspecified behavior of the
PartialImportWorkflowOperation.</p>
<h3 id="order-of-video-and-audio-elements">Order of Video and Audio Elements</h3>
<p>Within a sequence (<em>seq</em>), the <em>video</em> elements most occur in ascending order considering the values of their attributes
<em>begin</em>. The same holds for <em>audio</em> elements. Note the <em>video</em> and <em>audio</em> elements are processed individually, so the
order of occurrences of <em>video</em> and <em>audio</em> elements are independent from each other.</p>
<p><strong>Important:</strong> The PartialImportWorkflowOperation will not process <em>video</em> or <em>audio</em> elements correctly if the order of
appearance in the SMIL file is not correct.</p>
<h3 id="overlapping-partial-tracks">Overlapping Partial Tracks</h3>
<p>The behavior of overlapping partial tracks is unspecified, i.e. for a given element <em>e</em> (<em>video</em> or <em>audio</em>), the value
of <em>begin</em> for the subsequent element <em>(e+1)</em> of the same type (<em>video</em> or <em>audio</em>) within the same sequence must be
equal or greater than <em>e.begin + e.dur</em>, i.e. make sure that the following invariant holds: <em>(e+1).begin &gt;= e.begin +
e.dur</em></p>
<h2 id="encoding-profiles-the-partialimportworkflowoperation-uses-a-number-of-encoding-profiles-to-perform-its-processing">Encoding Profiles The PartialImportWorkflowOperation uses a number of encoding profiles to perform its processing.</h2>
<p>Some of the encoding profiles can be explicitly configured by the user, others are used implicitly in means of being
hard-coded and are not supposed to be changed by the user.</p>
<h3 id="hard-coded-encoding-profiles">Hard-coded Encoding Profiles</h3>
<table>
<thead>
<tr>
<th>encoding profile</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>import.preview</td>
<td>Extract the first frame of a given partial track</td>
</tr>
<tr>
<td>import.image-frame</td>
<td>Extract the last frame of a given partial track. Note that this profile is used to extract the <em>exactly</em> last frame of a partial track - not just a frame close to the last one. To make this work for video files with headers that don't contain the exact frame count, set <em>accurate_frame_count</em> to <em>true</em> in  etc/org.opencastproject.inspection.ffmpeg.MediaInspectionServiceImpl.cfg</td>
</tr>
<tr>
<td>image-movie.work</td>
<td>Generate video partial tracks based on extracted images used to fill video gaps</td>
</tr>
<tr>
<td>import.silent</td>
<td>Generate silent audio tracks used to fill audio gaps</td>
</tr>
</tbody>
</table>
<h3 id="configurable-encoding-profiles">Configurable Encoding Profiles</h3>
<table>
<thead>
<tr>
<th>configuration key</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>concat-encoding-profile</td>
<td>Used to concatenate partial tracks into tracks</td>
</tr>
<tr>
<td>trim-encoding-profile</td>
<td>Used to trim the resulting concatenated single tracks if necessary</td>
</tr>
<tr>
<td>force-encoding-profile</td>
<td>Used to re-encode target tracks in case the file extension of a given target track is not included in <em>required-extensions</em> or the configuration key <em>force-encoding</em> is set to <em>true</em></td>
</tr>
</tbody>
</table>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../postmediapackage-woh/" class="btn btn-neutral float-right" title="Post Media Package">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../normalizeaudio-woh/" class="btn btn-neutral" title="Normalize Audio"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/opencast/opencast/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../normalizeaudio-woh/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../postmediapackage-woh/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
