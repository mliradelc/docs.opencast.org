<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Architecture - Opencast - Administration Guide</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Architecture";
    var mkdocs_page_input_path = "modules/videoeditor.architecture.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Opencast - Administration Guide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../releasenotes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../upgrade/">Upgrade</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../installation/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../installation/multiple-servers/">Multiple Servers</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Source</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/source-linux/">Linux</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/source-macosx/">MacOS X</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Package</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/debs/">Debian/Ubuntu</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/rpm-fedora/">Fedora</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/rpm-rhel-sl-centos/">RHEL/CentOS</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation with Docker</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../installation/docker-local/">Testing Locally</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Configuration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../configuration/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/basic/">Basic</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/database/">Database</a>
                </li>
                <li class="">
                    
    <span class="caption-text">HTTPS</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/">Overview</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/nginx/">Using Nginx</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/opencast.only/">Internal HTTPS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/https/migration/">Migrating old content to HTTPS</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/asset-manager/">Asset Manager</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/message-broker/">Message Broker</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/metadata/">Metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/asset-upload-ui/">Manual Asset Upload</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/encoding/">Encoding</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/load/">Load</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/user-statistics.and.privacy/">Logging and Privacy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/multi.tenancy/">Multi Tenancy</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Authentication, Autorization and User Management</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security/">General Security</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/acl/">Access Control Lists</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.aai/">Authentication and Authorization Infrastructure (AAI)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.cas/">Central Authentication Service (CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.ldap/">LDAP Authentication and Authorization (without CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.user.moodle/">Moodle User Provider</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../../configuration/security.user.sakai/">Sakai User Provider</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/stream-security/">Stream Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/workflow/">Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/external-api/">External API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../configuration/oaipmh/">OAI-PMH</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../version-support/">Version Support</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Modules</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../atomrss/">Atom/RSS Feed</a>
                </li>
                <li class="">
                    
    <a class="" href="../awss3distribution/">AWS S3 Distribution</a>
                </li>
                <li class="">
                    
    <a class="" href="../execute/">Execute Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../liveschedule/">Live Schedule</a>
                </li>
                <li class="">
                    
    <a class="" href="../ltimodule/">LTI Module</a>
                </li>
                <li class="">
                    
    <a class="" href="../mediamodule.configuration/">Media Module</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Player</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../player.configuration/">Configuration</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../player.url.parameter/">URL Parameters</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../player.matomo.tracking/">Matomo Tracking</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../paella.player/">Paella player</a>
                </li>
                <li class="">
                    
    <a class="" href="../searchindex/">Search Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../stream-security/">Stream Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../textextraction/">Text Extraction</a>
                </li>
                <li class="">
                    
    <a class="" href="../timelinepreviews/">Timeline Previews</a>
                </li>
                <li class="">
                    
    <a class="" href="../watsontranscripts/">Transcripts (IBM Watson)</a>
                </li>
                <li class=" current">
                    
    <span class="caption-text">Video Editor</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../videoeditor.setup/">Setup</a>
                </li>
                <li class="toctree-l3 current">
                    
    <a class="current" href="./">Architecture</a>
    <ul class="subnav">
            
    <li class="toctree-l4"><a href="#video-editor-architecture">Video Editor: Architecture</a></li>
    
        <ul>
        
            <li><a class="toctree-l5" href="#modules-of-the-videoeditor">Modules Of The Videoeditor</a></li>
        
            <li><a class="toctree-l5" href="#edit-list-format">Edit List Format</a></li>
        
            <li><a class="toctree-l5" href="#workflow-operations">Workflow Operations</a></li>
        
            <li><a class="toctree-l5" href="#including-the-video-editor-to-the-workflow-definition-file">Including The Video Editor To The Workflow Definition File</a></li>
        
        </ul>
    

    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../videosegmentation/">Video Segmentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../waveform/">Waveform Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../adaptivestreaming-wowza/">Wowza Adaptive Streaming Distribution Service</a>
                </li>
                <li class="">
                    
    <a class="" href="../youtubepublication/">YouTube Publication</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Workflow Operation Handler</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retry-strategies/">Retry Strategies</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/analyze-tracks-woh/">Analyze Tracks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/analyzeaudio-woh/">Analyze Audio</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/animate-woh/">Animate</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/snapshot-woh/">Asset Snapshot</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/asset-delete-woh/">Asset Delete</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/attach-watson-transcription-woh/">Attach Watson Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/cleanup-woh/">Cleanup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/comment-woh/">Comment</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/compose-woh/">Compose</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/composite-woh/">Composite</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/concat-woh/">Concat</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/configure-by-dcterm-woh/">Configure-By-DCTerm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/copy-woh/">Copy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/clone-woh/">Clone</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/coverimage-woh/">Cover Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/defaults-woh/">Defaults</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/duplicate-event-woh/">Duplicate Event</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/editor-woh/">Editor</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/encode-woh/">Encode</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/error-resolution-woh/">Error Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/execute-once-woh/">Execute Once</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/execute-many-woh/">Execute Many</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/export-wf-properties-woh/">Export Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/extracttext-woh/">Extract Text</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/failing-woh/">Failing</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/httpnotify-woh/">HTTP Notify</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/image-woh/">Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/imagetovideo-woh/">Image to Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/import-wf-properties-woh/">Import Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/incident-woh/">Incident</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/include-woh/">Include</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/ingestdownload-woh/">Ingest-Download</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/inspect-woh/">Inspect</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/log-woh/">Log</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/normalizeaudio-woh/">Normalize Audio</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/partial-import-woh/">Partial Import</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/postmediapackage-woh/">Post Media Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/prepareav-woh/">Prepare A/V</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/probe-resolution-woh/">Probe Resolution</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/publish-aws-woh/">Publish AWS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/publish-configure-woh/">Publish Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/publish-engage-woh/">Publish Engage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/publish-oaipmh-woh/">Publish OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/publish-youtube-woh/">Publish YouTube</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/republish-oaipmh-woh/">Republish OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retract-aws-woh/">Retract AWS S3 and Cloudfront</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retract-engage-woh/">Retract Engage</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retract-configure-woh/">Retract Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retract-oaipmh-woh/">Retract OAI-PMH</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/retract-youtube-woh/">Retract YouTube</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/segmentpreviews-woh/">Segment Previews</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/segmentvideo-woh/">Segment Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/send-email-woh/">Send Email</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/series-woh/">Series</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/silence-woh/">Silence</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/start-watson-transcription-woh/">Start Watson Transcription</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/tag-woh/">Tag</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/tag-by-dcterm-woh/">Tag-By-DCTerm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/timelinepreviews-woh/">Timelinepreviews</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/theme-woh/">Theme</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/waveform-woh/">Waveform</a>
                </li>
                <li class="">
                    
    <a class="" href="../../workflowoperationhandlers/zip-woh/">Zip</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Opencast - Administration Guide</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Video Editor &raquo;</li>
        
      
        
          <li>Modules &raquo;</li>
        
      
    
    <li>Architecture</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/opencast/opencast/tree/develop/docs/guides/admin/docs/edit/master/docs/modules/videoeditor.architecture.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="video-editor-architecture">Video Editor: Architecture</h1>
<h2 id="modules-of-the-videoeditor">Modules Of The Videoeditor</h2>
<p>The Videoeditor consists of the following moduls. Additional to this there is a Workflow Operation Handler within the
Conductor module that provides the UI elements for the Video Editor.</p>
<ul>
<li>silencedetection-api<ul>
<li>API for the silence detection</li>
</ul>
</li>
<li>silencedetection-impl<ul>
<li>Implementation of the silence detection service</li>
<li>Provides a SMIL file that can be used by the Video Editor UI or the Video Editor service to create a new cutted
  file.</li>
</ul>
</li>
<li>silencedetection-remote<ul>
<li>Remote implementation of the silence detection service to enable load balancing in a distributed setup.</li>
</ul>
</li>
<li>smil-api<ul>
<li>API for the SMIL service</li>
</ul>
</li>
<li>smil-impl<ul>
<li>The SMIL service allows creation and manipulation of SMIL files. This is more or less a helper class to create
  consistent SMIL files.</li>
</ul>
</li>
<li>videoeditor-api<ul>
<li>The API for the Video Editor which takes a SMIL file as an input to create a cutted version of the media files.</li>
</ul>
</li>
<li>videoeditor-ffmpeg-impl<ul>
<li>The Video Editor service creates new media files that will be cutted based on the information provided in a SMIL
  file. In the current implementation GStreamer with the gnonlin module is used to process the files.</li>
</ul>
</li>
<li>videoeditor-remote<ul>
<li>Remote implementation of the video editor service to enable load balancing in a distributed setup.</li>
</ul>
</li>
</ul>
<p>Several other changes have been made on other Opencast modules to provide a better user experience for the video
editor (i.e. byte-range request on the working-file-repository).</p>
<h2 id="edit-list-format">Edit List Format</h2>
<p>The video editor uses SMIL 3.0 as a standardized Data format for the edit lists (cutting information). Some conventions
and namespace extensions have been made to make sure that Opencast is able to find the files.</p>
<ul>
<li>As we usually have two (or more) parallel media files, these files are grouped in a <code>&lt;par&gt;</code>-element which forms a
  segment that should be included in the resulting video.  This means the included <code>&lt;video&gt;</code>-files will be played in
  parallel.</li>
<li>The clipBegin and clipEnd attributes a provided as milliseconds. Usually these should be identical for all <code>&lt;videos&gt;</code>
  within a <code>&lt;par&gt;</code>.  For each segment a <code>&lt;par&gt;</code> is created.</li>
<li>In the result of the silence detection segments with silence are omitted within the SMIL files, so only segments
  within the SMIL doc will be in the resulting video.</li>
<li>The segments within the SMIL file will be in the order they are written down. If the sequence of the segments is
  changed, the sequence within the resulting video is changed too.</li>
</ul>
<p><strong>Example SMIL file</strong></p>
<pre><code>&lt;smil xmlns="http://www.w3.org/ns/SMIL" baseProfile="Language" version="3.0" xml:id="s-524c7815-4520-48e4-bb5e-94dcfdb3229f"&gt;
    &lt;head xml:id="h-03b31c8d-68cf-49ea-8bae-d94abddf8f09"&gt;
        &lt;meta name="track-duration" content="6000841ms" xml:id="meta-32069ddb-351d-4dca-a742-b9be490080f8"/&gt;
        &lt;paramGroup xml:id="pg-bb1e4ab7-08e8-4ae7-9da8-1f6d46b56387"&gt;
            &lt;param value="9f373445-5f46-4bdd-8d93-dca5e1094c38" name="track-id" valuetype="data" xml:id="param-d509b427-b239-4c4b-985a-f8b4ea31bbfb"/&gt;
            &lt;param value="http://my.server.tld/files/mediapackage/98c91b97-51de-46ae-992d-c497798f16c8/9f373445-5f46-4bdd-8d93-dca5e1094c38/lecturer.mp4" name="track-src" valuetype="data" xml:id="param-411e0015-af0e-463c-898d-9a2bc594df46"/&gt;
            &lt;param value="presenter/preview" name="track-flavor" valuetype="data" xml:id="param-5ea022cd-189d-420f-9cea-4f6775af285e"/&gt;
        &lt;/paramGroup&gt;
        &lt;paramGroup xml:id="pg-35035f9c-ab9a-49a7-9ef8-9825190b949b"&gt;
            &lt;param value="9af21dad-cb92-4e18-bc4c-b8c9b7ce4e2f" name="track-id" valuetype="data" xml:id="param-c3c427ad-ef8a-4a71-9b0c-9208dd8a6bed"/&gt;
            &lt;param value="http://my.server.tld/files/mediapackage/98c91b97-51de-46ae-992d-c497798f16c8/9af21dad-cb92-4e18-bc4c-b8c9b7ce4e2f/screen.mp4" name="track-src" valuetype="data" xml:id="param-c15e1ed7-f773-456d-a007-fc237d9e0665"/&gt;
            &lt;param value="presentation/preview" name="track-flavor" valuetype="data" xml:id="param-97d5b5ac-1258-4267-a013-dc3882d7e242"/&gt;
        &lt;/paramGroup&gt;
    &lt;/head&gt;
    &lt;body xml:id="b-c233c9ef-42d9-4f50-a1d2-29e3bbff003d"&gt;
        &lt;par xml:id="par-7955133a-bcbe-40f8-87fd-47e78b3357c0"&gt;
            &lt;video src="http://my.server.tld/files/mediapackage/98c91b97-51de-46ae-992d-c497798f16c8/9f373445-5f46-4bdd-8d93-dca5e1094c38/lecturer.mp4" paramGroup="pg-bb1e4ab7-08e8-4ae7-9da8-1f6d46b56387" clipEnd="5522400ms" clipBegin="157880ms" xml:id="v-61f5d0ee-dd36-4b1d-af3d-3f09f8807179"/&gt;
            &lt;video src="http://my.server.tld/files/mediapackage/98c91b97-51de-46ae-992d-c497798f16c8/9af21dad-cb92-4e18-bc4c-b8c9b7ce4e2f/screen.mp4" paramGroup="pg-35035f9c-ab9a-49a7-9ef8-9825190b949b" clipEnd="5522400ms" clipBegin="157880ms" xml:id="v-c68260e7-fd0d-4df6-8696-cc475ab3b3f8"/&gt;
        &lt;/par&gt;
    &lt;/body&gt;
&lt;/smil&gt;
</code></pre>
<h2 id="workflow-operations">Workflow Operations</h2>
<h3 id="waveform-operation">Waveform Operation</h3>
<p>The <strong>waveform</strong> operation creates an image showing the temporal audio activity within the recording. This is be done
with a probably well known waveform (see example image).</p>
<p><img alt="Waveform image example" src="../../workflowoperationhandlers/waveform.png" /></p>
<p>The operation does not need an additional module, as it is not very work intensive to create such an image. The
operation needs and audio-only file to create the image and it provides an PNG image.</p>
<p>Input parameter is the source-flavor of the audio files for which a waveform should be created. The *-operator can be
used if the waveform should be created for all flavors with a certain subtypes (like "audio" in our example).</p>
<p>The output-parameter is target-flavor which should use the *-operator if it was used in the source-flavor too.</p>
<p><strong>Waveform Operation Template</strong></p>
<pre><code>&lt;operation
  id="waveform"
  if="${trimHold}"
  fail-on-error="false"
  description="Generating waveform"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-flavor"&gt;*/audio&lt;/configuration&gt;
    &lt;configuration key="target-flavor"&gt;*/waveform&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
<h3 id="silence-operation">Silence Operation</h3>
<p>The <strong>silence</strong> operation performs a silence detection on an audio-only input file. The operation needs the silence
detection API and impl (or remote in a distributed system) modules to be installed to process the request.</p>
<p>The input parameters are source-flavors that takes one flavor/sub-type or multiple input flavors with the *-operator
followed by the sub-type, and reference-tracks-flavour where the subtype of the media files that should be included in
the provided SMIL file will be set. The * should not be modified here. In most cases it is not important which
reference-tracks-flavour is selected as long as all relevant flavors are available within this feature. "preview" is not
a bad choice as all files available within the video editor UI are also available with this flavor, unlike "source"
where not all flavors may be available, as some recorders record all streams to one file and the tracks are separated
afterwards. The editor operation afterwards will anyway try to select the best available quality.</p>
<p>The output parameter is smil-flavor-subtype which provides the modificatory for the flavor subtype after this operation.
The main flavor will be consistent and only the subtype will be replaced.</p>
<p>The output of this operation is a SMIL file (see the example above).</p>
<p><strong>Silence Operation Template</strong></p>
<pre><code>&lt;operation
  id="silence"
  if="${trimHold}"
  fail-on-error="false"
  description="Executing silence detection"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-flavors"&gt;*/audio&lt;/configuration&gt;
    &lt;configuration key="smil-flavor-subtype"&gt;smil&lt;/configuration&gt;
    &lt;configuration key="reference-tracks-flavor"&gt;*/preview&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
<h3 id="editor-operation">Editor Operation</h3>
<p>The <strong>editor</strong> operation provides the UI for editing trim hold state and processes the edited files. This operation
needs the videoeditor API and impl (or remote on distributed systems) to be installed.</p>
<p>The input parameters are:</p>
<ul>
<li>source-flavors: the subtype of all media files in the best available quality and in a codec that can be processed by
   the videoeditor modules. The *-should usually not be changed, as tracks can be excluded in the editor UI too, only
   the subtype is important. All needed videos should be available within this flavor.</li>
<li>preview-flavours: the subtype of the media files that should be used for the preview player. This is an HTML5 player
   so the coded can be H.264 or WebM based on the browser. The main flavor should be the same as in source-flavors.</li>
<li>smil-flavors: the smil file(s) that should be used as a proposal within the editor UI. If * is used presenter/smil
   will be favored, if this is not available the first in the list will be used.</li>
<li>skipped-flavors: the flavor of the files that should be used if this workflow-operation is skipped.</li>
</ul>
<p>The output parameters are:</p>
<ul>
<li>target-smil-flavor: only a unique flavor is allowed here, as this is the file that the editor UI writes and that will
   be taken for processing the edited files afterwards.</li>
<li>target-flavor-subtype: the flavor-subtype that will be used for all media files created in this operation.</li>
</ul>
<p><strong>Editor Operation Template</strong></p>
<pre><code>&lt;operation
  id="editor"
  if="${trimHold}"
  fail-on-error="true"
  exception-handler-workflow="error"
  description="Waiting for user to review / video edit recording"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-flavors"&gt;*/work&lt;/configuration&gt;
    &lt;configuration key="preview-flavors"&gt;*/preview&lt;/configuration&gt;
    &lt;configuration key="skipped-flavors"&gt;*/preview&lt;/configuration&gt;
    &lt;configuration key="smil-flavors"&gt;*/smil&lt;/configuration&gt;
    &lt;configuration key="target-smil-flavor"&gt;episode/smil&lt;/configuration&gt;
    &lt;configuration key="target-flavor-subtype"&gt;trimmed&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
<h2 id="including-the-video-editor-to-the-workflow-definition-file">Including The Video Editor To The Workflow Definition File</h2>
<p>Including the Video Editor with the silence detection into the needs some changes in the default workflow. Several of
the steps here are inherited from the trim-operations and the workflow it was included too. We assume that you set
${trimHold} variable like in the current workflow definitions with trimming.</p>
<ol>
<li>The prepare-av operations has to be adopted. Gstreamer/gnonlin is kind of picky on the codec that it supports. So the
   media file has to be re-encoded in the beginning of the workflow. The prepare-av encoding profiles (av.work and
   mux-av.work) have been updated in the Video Editor branch for this. Within the prepare-av operation in the
   workflow-definition XML-file rewriting the file should be forced:</li>
</ol>
<p><strong>Changes in the workflow definition</strong></p>
<p><code>&lt;configuration key="rewrite"&gt;true&lt;/configuration&gt;</code></p>
<p><code>&lt;configuration key="audio-muxing-source-flavors"&gt;*/?,*/*&lt;/configuration&gt;</code></p>
<ol>
<li>
<p>The preview videos have to be created. These can be in H.264 (for Safari, IE, Chrome) or WebM (for Firefox, Opera or
   Chrome) codec. Encoding profiles for WebM are provided in the video editor branch and are used in the examples. This
   operation should be after the prepare-av operation.</p>
<p><strong>Workflow operation to create WebM preview videos</strong></p>
<pre><code>&lt;operation
  id="compose"
  if="${trimHold}"
  fail-on-error="true"
  exception-handler-workflow="error"
  description="Encoding presenter (camera) video for videoeditor preview"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-flavor"&gt;*/work&lt;/configuration&gt;
    &lt;configuration key="target-flavor"&gt;*/preview&lt;/configuration&gt;
    &lt;configuration key="encoding-profile"&gt;webm-preview.http&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
</li>
<li>
<p>An audio-only file has to be composed for the waveform and silence operation. This operation should be after the
   prepare-av operation.  Workflow operation to compose the audio-only file(s)</p>
<pre><code>&lt;operation
  id="compose"
  if="${trimHold}"
  fail-on-error="false"
  description="Extracting audio for waveform generation"&gt;
  &lt;configurations&gt;
    &lt;configuration key="source-flavor"&gt;*/work&lt;/configuration&gt;
    &lt;configuration key="target-flavor"&gt;*/audio&lt;/configuration&gt;
    &lt;configuration key="encoding-profile"&gt;audio.wav&lt;/configuration&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
</li>
<li>
<p>The waveform operation should be included. See above for the XML-code for this operation. The audio-only file should
   already be available.</p>
</li>
<li>The silence detection should be done. See above for the XML-code for this operation. The audio-only file should
   already be available.</li>
<li>After all previous operations have been done the editor can be included. See above for the XML-code for this
   operation.</li>
<li>You may consider to tag the trimmed files for archiving. Then you should include this operation after the editor:</li>
</ol>
<p><strong>Tagging trimmed files for the archive</strong></p>
<pre><code>    &lt;operation
      id="tag"
      description="Tagging media for archival"&gt;
      &lt;configurations&gt;
        &lt;configuration key="source-flavors"&gt;*/trimmed&lt;/configuration&gt;
        &lt;configuration key="target-tags"&gt;+archive&lt;/configuration&gt;
      &lt;/configurations&gt;
    &lt;/operation&gt;

You could check, if you want to archive the source media too, or remove the source-flavors from the previous tagging
operations.
</code></pre>
<ol>
<li>The rest of the workflow definition can be kept as it is, the input flavor subtype for the trimmed files in other
   operations is "/trimmed" if you follow the naming in this example.</li>
</ol>
<p>The default <em>compose-distribute-publish.xml</em> workflow definition within the Video Editor branch has already been updated
to include the editor instead of the trim-hold state. The trim operation is not overwritten with the video editor but
could still be used.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../videosegmentation/" class="btn btn-neutral float-right" title="Video Segmentation">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../videoeditor.setup/" class="btn btn-neutral" title="Setup"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/opencast/opencast/tree/develop/docs/guides/admin/docs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../videoeditor.setup/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../videosegmentation/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
