<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<link href="../../img/favicon.ico" rel="shortcut icon"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>Analyze Mediapackage - Administration Guide</title>
<link href="../../css/bootstrap-3.3.7.min.css" rel="stylesheet"/>
<link href="../../css/font-awesome-4.7.0.css" rel="stylesheet"/>
<link href="../../css/base.css" rel="stylesheet"/>
<link href="../../css/highlight.css" rel="stylesheet"/>
<link href="../../css/extra.css" rel="stylesheet"/>
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
<script src="../../js/jquery-3.2.1.min.js"></script>
<script src="../../js/bootstrap-3.3.7.min.js"></script>
<script src="../../js/highlight.pack.js"></script>
<base target="_top"/>
<script>
      var base_url = '../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "AnalyzeMediapackageWorkflowOperationHandler", url: "#_top", children: [
              {title: "Description", url: "#description" },
              {title: "Workflow Instance Variables", url: "#workflow-instance-variables" },
              {title: "Parameter Table", url: "#parameter-table" },
              {title: "Operation Example", url: "#operation-example" },
          ]},
        ];

    </script>
<script src="../../js/base.js"></script>
<script src="../../javascript/extra.js"></script>
</meta></head>
<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>
<div class="container-fluid wm-page-content">
<a name="_top"></a>
<div aria-label="navigation" class="row wm-article-nav-buttons" role="navigation">
<div class="wm-article-nav pull-right">
<a class="btn btn-xs btn-default pull-right" href="../analyzeaudio-woh/">
        Next
        <i aria-hidden="true" class="fa fa-chevron-right"></i>
</a>
<a class="btn btn-xs btn-link" href="../analyzeaudio-woh/">
        Analyze Audio
      </a>
</div>
<div class="wm-article-nav">
<a class="btn btn-xs btn-default pull-left" href="../analyze-tracks-woh/">
<i aria-hidden="true" class="fa fa-chevron-left"></i>
        Previous</a><a class="btn btn-xs btn-link" href="../analyze-tracks-woh/">
        Analyze Tracks
      </a>
</div>
</div>
<h1 id="analyzemediapackageworkflowoperationhandler">AnalyzeMediapackageWorkflowOperationHandler</h1>
<h2 id="description">Description</h2>
<p>The AnalyzeMediapackageWorkflowOperationHandler analyzes the mediapackage and sets workflow instance
variables based on the content of the medapackage. These variables can then be used to control if workflow
operations should be executed or skipped.</p>
<h2 id="workflow-instance-variables">Workflow Instance Variables</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><em>flavor</em>_exists</td>
<td><code>presenter_source_exists=true</code></td>
<td>Whether an element with given flavor is in the mediapackage.</td>
</tr>
<tr>
<td><em>flavor</em>_type</td>
<td><code>presenter_source_type=Track</code></td>
<td>The type of the element with the given flavor. Possible values are: <code>Attachment</code>, <code>Catalog</code>, <code>Track</code>.</td>
</tr>
</tbody>
</table>
<h2 id="parameter-table">Parameter Table</h2>
<p>If no configuration keys are specified, workflow instance variables will be set for every mediapackage element.</p>
<p>If no mediapackage element matches a configuration key, no workflow instance variables will be set for that key. For example, the operation will never generate <code>presentation_work_exists=false</code>.</p>
<table>
<thead>
<tr>
<th>Configuration Key</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>source-flavors</td>
<td><code>*/work</code></td>
<td>The comma separated list of flavors of the elements we are interested in.</td>
</tr>
<tr>
<td>source-tags</td>
<td><code>delivery, 1080p</code></td>
<td>The comma separated list of tags of the elements we are interested in.</td>
</tr>
</tbody>
</table>
<h2 id="operation-example">Operation Example</h2>
<pre><code>&lt;operation
  id="analyze-mediapackage"
  fail-on-error="true"
  exception-handler-workflow="partial-error"
  description="Analyze media package and set control variables"&gt;
  &lt;configurations&gt;
  &lt;/configurations&gt;
&lt;/operation&gt;
</code></pre>
<p>The operation will create workflow instance variables like this:</p>
<pre><code>dublincore_episode_exists=true
dublincore_episode_type=Catalog
presentation_source_exists=true
presentation_source_type=Track
security_xacml_episode_exists=true
security_xacml_episode_type=Attachment
</code></pre>
<br/>
<div aria-label="navigation" class="row wm-article-nav-buttons" role="navigation">
<div class="wm-article-nav pull-right">
<a class="btn btn-xs btn-default pull-right" href="../analyzeaudio-woh/">
        Next
        <i aria-hidden="true" class="fa fa-chevron-right"></i>
</a>
<a class="btn btn-xs btn-link" href="../analyzeaudio-woh/">
        Analyze Audio
      </a>
</div>
<div class="wm-article-nav">
<a class="btn btn-xs btn-default pull-left" href="../analyze-tracks-woh/">
<i aria-hidden="true" class="fa fa-chevron-left"></i>
        Previous</a><a class="btn btn-xs btn-link" href="../analyze-tracks-woh/">
        Analyze Tracks
      </a>
</div>
</div>
<br/>
</div>
<footer class="container-fluid wm-page-content">
<p>
<a href="https://github.com/opencast/opencast/edit/develop/docs/guides/admin/docs/workflowoperationhandlers/analyze-mediapackage-woh.md"><i class="fa fa-github"></i>
Edit on GitHub</a>
</p>
<p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>
</body>
</html>