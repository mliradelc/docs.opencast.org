<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Upgrade - Opencast - Administration Guide</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Upgrade";
    var mkdocs_page_input_path = "upgrade.md";
    var mkdocs_page_url = "/upgrade/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Opencast - Administration Guide</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../releasenotes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Upgrade</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#upgrading-opencast-22-to-23">Upgrading Opencast 2.2 To 2.3</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#how-to-upgrade">How to Upgrade</a></li>
        
            <li><a class="toctree-l3" href="#database-migration">Database Migration</a></li>
        
            <li><a class="toctree-l3" href="#upgrade-message-broker-configuration">Upgrade Message Broker Configuration</a></li>
        
            <li><a class="toctree-l3" href="#re-build-search-indexes">Re-Build Search Indexes</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../changelog/">Changelog</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../installation/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../installation/multiple-servers/">Multiple Servers</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Source</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../installation/source-debian-ubuntu/">Debian/Ubuntu</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../installation/source-rhel-sl-centos/">RHEL/CentOS</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../installation/source-macosx/">MacOS X</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <span class="caption-text">Installation from Package (RPM)</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../installation/rpm-fedora/">Fedora</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../installation/rpm-rhel-sl-centos/">RHEL/CentOS</a>
                </li>
    </ul>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Configuration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../configuration/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/basic/">Basic</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/database/">Database</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/message-broker/">Message Broker</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/metadata/">Metadata</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/encoding/">Encoding</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/load/">Load</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/logging.and.privacy/">Logging and Privacy</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/multi.tenancy/">Multi Tenancy</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Security</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/security/">General Security</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/security.cas/">Central Authentication Service (CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/security.ldap/">LDAP Authentication and Authorization (without CAS)</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/stream-security/">Stream Security</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../configuration/acl/">Access Control Lists</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/workflow/">Workflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/external-api/">External API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Modules</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../modules/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/atomrss/">Atom/RSS Feed</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/ltimodule/">LTI Module</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/mediamodule.configuration/">Media Module</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Player</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../modules/player.configuration/">Configuration</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../modules/player.url.parameter/">URL Parameters</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../modules/searchindex/">Search Index</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/stream-security/">Stream Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/textextraction/">Text Extraction</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Video Editor</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../modules/videoeditor.setup/">Setup</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../modules/videoeditor.architecture/">Architecture</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../modules/videosegmentation/">Video Segmentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../modules/youtubepublication/">YouTube Publication</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Workflow Operation Handler</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/">Overview</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/analyze-tracks-woh/">Analyze Tracks</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/analyzeaudio-woh/">Analyze Audio</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/archive-woh/">Archive</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/cleanup-woh/">Cleanup</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/comment-woh/">Comment</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/compose-woh/">Compose</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/composite-woh/">Composite</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/concat-woh/">Concat</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/copy-woh/">Copy</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/coverimage-woh/">Cover Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/defaults-woh/">Defaults</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/editor-woh/">Editor</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/email-woh/">Email</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/encode-woh/">Encode</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/export-wf-properties-woh/">Export Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/extracttext-woh/">Extract Text</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/httpnotify-woh/">HTTP Notify</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/image-woh/">Image</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/imagetovideo-woh/">Image to Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/import-wf-properties-woh/">Import Workflow Properties</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/incident-woh/">Incident</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/ingestdownload-woh/">Ingest-Download</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/inspect-woh/">Inspect</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/normalizeaudio-woh/">Normalize Audio</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/partial-import-woh/">Partial Import</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/postmediapackage-woh/">Post Media Package</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/prepareav-woh/">Prepare A/V</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/publishconfigure-woh/">Publish Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/publishengage-woh/">Publish Engage</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/retractconfigure-woh/">Retract Configure</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/segmentpreviews-woh/">Segment Previews</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/segmentvideo-woh/">Segment Video</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/series-woh/">Series</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/silence-woh/">Silence</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/tag-woh/">Tag</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/theme-woh/">Theme</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/waveform-woh/">Waveform</a>
                </li>
                <li class="">
                    
    <a class="" href="../workflowoperationhandlers/zip-woh/">Zip</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Opencast - Administration Guide</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Upgrade</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://bitbucket.org/opencast-community/matterhorn/src/develop/docs/guides/admin/docs/src/default/docs/upgrade.md"
          class="icon icon-bitbucket"
        > Edit on Bitbucket</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="upgrading-opencast-22-to-23">Upgrading Opencast 2.2 To 2.3</h1>
<p>This guide describes how to upgrade Opencast 2.2.x to 2.3.x. In case you need information about how to upgrade older
versions of Opencast, please refer to the <a href="https://docs.opencast.org">old release notes</a>.</p>
<h2 id="how-to-upgrade">How to Upgrade</h2>
<ol>
<li>Download Opencast 2.3</li>
<li>Stop your current Opencast instance</li>
<li>Back-up Opencast files and database (optional)</li>
<li><a href="#database-migration">Upgrade the database</a></li>
<li><a href="#upgrade-message-broker-configuration">Upgrade the message broker configuration</a></li>
<li>Update the third party tools</li>
<li>Replace Opencast 2.2 with 2.3</li>
<li>Review the configuration changes and adjust your configuration accordingly</li>
<li><a href="#re-build-search-indexes">Re-build the search indexes</a></li>
</ol>
<h2 id="database-migration">Database Migration</h2>
<p>Opencast 2.3 comes with a slightly modified database scheme compared to Opencast 2.2, essentially allowing comments to
be longer than 255 characters. While this might seem a rather unimportant change, we highly recommend to apply this
change to your existing database to stay in sync with the community versions, avoiding problems with further migrations.</p>
<p>It should be needless to say that this migration should not take a lot of time and should be safe. Nevertheless, as with
all database migrations, we recommend to make a database backup before attempting the upgrade.</p>
<p>You can find the database upgrade script at <code>…/docs/upgrade/2.1_to_2.2/mysql5.sql</code>.</p>
<h2 id="upgrade-message-broker-configuration">Upgrade Message Broker Configuration</h2>
<p>The message broker configuration has been changed and must be updated. You can find the latest configuration at
<code>docs/scripts/activemq/activemq.xml</code>.</p>
<p>Please make sure to adapt the configuration to your needs, adding access control rules and configuring the hosts to
listen to as necessary. For more information, have a look at the <a href="../configuration/message-broker/">message broker configuration guide
</a>.</p>
<h2 id="re-build-search-indexes">Re-Build Search Indexes</h2>
<h3 id="search-service-solr-index">Search-Service Solr Index</h3>
<p>A security issue in the search service, which could potentially allow some
users to view private recordings without the proper access rights, was revealed
and fixed in 2.2.4.</p>
<p>If you update from a version lower than 2.2.4, we recommend to re-build the
search index. An automatic rebuild can be triggered by just deleting the Solr
search index directory at <code>…/data/solr-indexes/search</code>. The index will populate
itself again from the database the next time Opencast is started.</p>
<p>If you have already upgraded to 2.2.4 and you rebuilt the search index then,
you need not do it again.</p>
<h3 id="elasticsearch-index">Elasticsearch Index</h3>
<p>The introduction of the new external API requires an update to the Elasticsearch index:</p>
<ol>
<li>Delete the index directory at <code>…/data/index</code>.</li>
<li>Restart Opencast and wait until the system is fully started.</li>
<li>
<p>Use one of the following methods to recreate the index:</p>
<ul>
<li>Make an HTTP GET request to <code>/admin-ng/index/recreateIndex</code> using your browser or an alternative HTTP client.</li>
<li>Open the REST documentation, which can be found under the “Help” section in the Admin UI (by clicking on the “?”
  symbol at the top right corner). Then go to the “Admin UI - Index Endpoint” section and use the testing form on
  <code>/recreateIndex</code>.</li>
</ul>
<p>In both cases, the resulting page is empty but should return a HTTP status 200.</p>
</li>
</ol>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../changelog/" class="btn btn-neutral float-right" title="Changelog">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../releasenotes/" class="btn btn-neutral" title="Release Notes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://bitbucket.org/opencast-community/matterhorn/src/develop/docs/guides/admin/docs" class="icon icon-bitbucket" style="float: left; color: #fcfcfc"> BitBucket</a>
      
      
        <span><a href="../releasenotes/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../changelog/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
